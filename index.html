<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Dev.Learn</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body>
  <h1 id="título">
    <span id="verde">USP</span><span id="vermelho">FLIX</span>
  </h1>
  <h2 id="la"> Filmes e séries </h2>
  <form>
    <input id="pesquisar" placeholder="Digite o nome do Filme ou da Série"/>
    <button class="a" onclick="Pesquisar()">Pesquisar</button>
  </form>
  <h2 id="final"> 
    Nos acompanhe!
  </h2>
  <h3 id="catálogo">
    Tenha acesso ao nosso catálogo pelo celular!
  </h3>
  <div class="filmes"></div>
  <script src="script.js"></script>
  <script>
  async function Pesquisar() {
    const inputValor = document.getElementById('pesquisar').value.trim();
    if (inputValor === '') {
      alert('Digite o nome do filme ou série para pesquisar.');
      return;
    }

    const url = `https://imdb-top-100-movies.p.rapidapi.com/search?type=title&term=${encodeURIComponent(inputValor)}`;

    const xhr = new XMLHttpRequest();
    xhr.withCredentials = true;

    xhr.addEventListener('readystatechange', function () {
      if (this.readyState === this.DONE) {
        const response = JSON.parse(this.responseText);
        console.log(response);
        const filmesDiv = document.querySelector('.filmes');
        filmesDiv.innerHTML = '';
        if (response.results && response.results.length > 0) {
          response.results.forEach(filme => {
            const titulo = filme.title;
            const elementoFilme = document.createElement('p');
            elementoFilme.textContent = titulo;
            filmesDiv.appendChild(elementoFilme);
          });
        } else {
          filmesDiv.textContent = 'Nenhum resultado foi encontrado.';
        }
      }
    });
</script>
</body>

</html>
